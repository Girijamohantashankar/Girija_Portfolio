"use strict";(()=>{var e={};e.id=91,e.ids=[91],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,n){return n in t?t[n]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,n)):"function"==typeof t&&"default"===n?t:void 0}}})},9322:(e,t,n)=>{n.r(t),n.d(t,{config:()=>A,default:()=>v,routeModule:()=>E});var r={};n.r(r),n.d(r,{default:()=>P});var o=n(1802),s=n(7153),a=n(6249);let i=require("mongoose");var l=n.n(i);let c=process.env.MONGODB_URI;if(!c)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let u=global.mongoose;async function d(){return u.conn||(u.promise||(u.promise=l().connect(c,{bufferCommands:!1}).then(e=>e)),u.conn=await u.promise),u.conn}u||(u=global.mongoose={conn:null,promise:null});let p=new(l()).Schema({name:{type:String,required:!0},email:{type:String,required:!0},message:{type:String,required:!0}},{timestamps:!0}),f=l().models.Contact||l().model("Contact",p),m=require("nodemailer");var g=n.n(m);async function P(e,t){if("POST"!==e.method)return t.status(405).json({message:"Method not allowed"});try{await d();let{name:n,email:r,message:o}=e.body;if(!n||!r||!o)return t.status(400).json({success:!1,message:"All fields are required"});let s=new f({name:n,email:r,message:o});await s.save();let a=g().createTransport({service:"gmail",auth:{user:process.env.EMAIL_USER,pass:process.env.EMAIL_PASS}}),i={from:process.env.EMAIL_USER,to:process.env.EMAIL_RECEIVER,subject:"New Contact Message",html:`
          <div style="font-family: Arial, sans-serif; line-height: 1.5; color: #333;">
            <h2 style="background-color: #f8f9fa; padding: 10px; text-align: center; color: #007bff;">New Contact Message</h2>
            
            <p><strong>Name:</strong> ${n}</p>
            <p><strong>Email:</strong> ${r}</p>
            <p><strong>Message:</strong></p>
            <p style="background-color: #f1f1f1; padding: 15px; border-left: 5px solid #007bff;">${o}</p>
            
            <footer style="margin-top: 20px; padding-top: 10px; border-top: 1px solid #ddd;">
              <p>This email was sent from your website contact form.</p>
            </footer>
          </div>
        `};return await a.sendMail(i),t.status(201).json({success:!0,message:"Message sent!"})}catch(e){return console.error("Error saving contact or sending email:",e.message),t.status(500).json({success:!1,message:"Server error: "+e.message})}}let v=(0,a.l)(r,"default"),A=(0,a.l)(r,"config"),E=new o.PagesAPIRouteModule({definition:{kind:s.x.PAGES_API,page:"/api/contact",pathname:"/api/contact",bundlePath:"",filename:""},userland:r})},7153:(e,t)=>{var n;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return n}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(n||(n={}))},1802:(e,t,n)=>{e.exports=n(145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var n=t(t.s=9322);module.exports=n})();